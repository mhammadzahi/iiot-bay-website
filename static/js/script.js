function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("newsletter-form"),t=document.getElementById("newsletter-submit");e&&t&&(t.addEventListener("click",function(i){i.preventDefault();let n=e.querySelector('input[name="email"]'),r=n.value.trim();if(!r){Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Please enter your email address",showConfirmButton:!1,timer:3e3,timerProgressBar:!1});return}if(!isValidEmail(r)){Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Please enter a valid email address",showConfirmButton:!1,timer:3e3,timerProgressBar:!1});return}t.disabled=!0;let s=t.innerHTML;t.innerHTML='<i class="fas fa-spinner fa-spin"></i>',fetch("/api/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}).then(e=>e.json()).then(t=>{Swal.fire({toast:!0,position:"top-end",icon:"success",title:"Subscribed successfully!",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),e.reset()}).catch(e=>{Swal.fire({toast:!0,position:"top-end",icon:"error",title:e.message||"Something went wrong",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}).finally(()=>{t.disabled=!1,t.innerHTML=s})}),e.addEventListener("submit",function(e){e.preventDefault(),t.click()}))}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("contact-form"),t=document.getElementById("contact-submit");e&&t&&e.addEventListener("submit",function(i){i.preventDefault();let n=new FormData(e),r=n.get("name").trim(),s=n.get("email").trim(),o=n.get("subject").trim(),a=n.get("message").trim();if(!r||!s||!a){Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Please fill in all required fields",showConfirmButton:!1,timer:3e3,timerProgressBar:!0});return}if(!isValidEmail(s)){Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Please enter a valid email address",showConfirmButton:!1,timer:3e3,timerProgressBar:!0});return}t.disabled=!0;let l=t.innerHTML;t.innerHTML='<i class="fas fa-spinner fa-spin me-2"></i>Sending...',fetch("/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:s,subject:o,message:a})}).then(e=>e.json()).then(t=>{if(t.success)Swal.fire({toast:!0,position:"top-end",icon:"success",title:"Message sent successfully!",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),e.reset();else throw Error(t.message||"Failed to send message")}).catch(e=>{Swal.fire({toast:!0,position:"top-end",icon:"error",title:e.message||"Something went wrong",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}).finally(()=>{t.disabled=!1,t.innerHTML=l})})});